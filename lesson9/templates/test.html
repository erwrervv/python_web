<!DOCTYPE html>
<html>
  <head>
    <title>Chart.js 散點圖 (Scatter Plot) 測試</title>

    <style type="text/css">
      /*給圖表一個固定的繪圖區域*/
      .chart-container {
        position: relative;
        width: 60vw;
        height: 60vh;
        margin: 20px auto;
        border: 2px solid #ddd;
      }
    </style>
    <script>
      // debugger;
      /* 課程測試 */
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Chart.js 已經載入，現在可以使用 'Chart' 這個物件了。");

        // 3.JS 抓取畫布和2D工具箱
        const ctx = document.getElementById("myChartCanvas").getContext("2d");
        // 散點圖的資料
        const studentData = [
          { x: 158, y: 55 },
          { x: 170, y: 60 },
          { x: 184, y: 70 },
          { x: 158, y: 55 },
          { x: 175, y: 61 },
          { x: 182, y: 75 },
          { x: 171, y: 60 },
          { x: 183, y: 70 },
        ];
        // 建立散點圖
        new Chart(ctx, {
          //指定圖表類行為scatter散點圖
          type: "scatter",
          // data物件,存放資料
          data: {
            datasets: [
              {
                label: "學生身高 vs 體重 (第一組)",
                //studentData:散點圖的資料來自studentData
                data: studentData,
                backgroundColor: "rgba(255, 99, 132, 0.8)", //點的顏色
                borderColor: "rgba(255, 99, 132, 1)", //點的邊框顏色
                borderWidth: 1,
                pointRadius: 10, //點的大小
                pointHoverRadius: 12, //滑鼠滑過時點的大小,
              },
              {
                label: "學生身高 vs 體重 (第二組)",
                data: [
                  { x: 154, y: 58 },
                  { x: 172, y: 68 },
                  { x: 181, y: 78 },
                  { x: 151, y: 58 },
                ],
                backgroundColor: "rgba(54, 18, 255, 0.5)", //點的顏色
                borderColor: "rgba(54, 18, 255, 1)", //點的邊框顏色
                borderWidth: 1,
                pointRadius: 10, //點的大小
                pointHoverRadius: 12, //滑鼠滑過時點的大小
              },
            ],
          },
          //options 物件 ,設定圖表的選項
          options: {
            responsive: true,
            maintainAspectRatio: false,
            //坐標軸設定
            scales: {
              x: {
                type: "linear",
                position: "bottom", //x軸放在底部
                title: {
                  display: true,
                  text: "身高 (cm)",
                  font: {
                    size: 16,
                  },
                },
              },
              y: {
                type: "linear",
                position: "left", //y軸放在左邊
                title: {
                  display: true,
                  text: "體重 (kg)",
                  font: {
                    size: 16,
                  },
                },
              },
            },
            //插件設定
            plugins: {
              title: {
                display: true,
                text: "身高與體重的關係",
                font: {
                  size: 20,
                },
                padding: 20,
              },
              tooltip: {
                //滑鼠移上去會觸發的事件
                callbacks: {
                  //滑鼠移上去會觸發的事件
                  label: function (context) {
                    // console.log(context); 
                    let label = context.dataset.label || "";
                    let xVal = context.parsed.x;
                    let yVal = context.parsed.y;

                    return `${label} (${xVal} cm, ${yVal} kg)`;
                  },
                },
              },
            },
          },
        });
      });
      /* 課程測試 */
    </script>
  </head>
  <body>
    <h1>範例：學生身高 vs 體重 散點圖</h1>

    <div class="chart-container">
      <canvas id="myChartCanvas"></canvas>
    </div>

    <script src="{{url_for('static',filename='vendor/chart.js/chart.umd.js')}}"></script>
  </body>
</html>
